<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="../../css/iuapmobile.um.css">
    <link rel="stylesheet" href="../../css/fonts/iconfont.css">
    <link rel="stylesheet" href="../../css/mint.css">
    <script src="../../js/font.js"></script>
    <style>
        input::-webkit-input-placeholder {
            color: #DEDEDE;
            font-size: 0.28rem;
        }

        .topheader {
            position: relative;
            height: 180px;
            background-image: url("img/cardBgc.png");
            background-repeat: no-repeat;
            background-size: 100% 100%;
        }

        .topheader img {
            margin-top: 0.8rem;
            width: 2.8rem;
            height: 1.8rem;
        }

        .mint-field-core {
            text-align: right;
        }

        .mint-cell-wrapper {
            color: #333;
            font-size: 0.28rem;
        }

        .mint-cell {
            min-height: 40px;
            /* height: 0.88rem; */
            height: 44px;
            color: #333;
            font-size: 0.28rem;
        }

        div.item {
            /* line-height: 0.88rem; */
            line-height: 44px;
            background: #ffffff;
            border-bottom: 1px solid #f7f7f7;
            font-size: 0.28rem;
            height: 44px;
        }

        div.item span {
            color: #333;
        }

        div.item span.um-red {
            color: red;
        }

        div.item span i {
            color: #dbdbdb;
        }

        .pickerColor {
            width: 100%;
            z-index: 10;
            background: #ffffff;
        }

        .pickerColor>p {
            line-height: .88rem;
            padding: 0 .56rem;
            color: #039BE5;
            border-top: 1px solid #E0E0E0;
            overflow: hidden;
        }

        .pickerColor>p span {
            color: #34aadc;
        }

        .mint-cell-wrapper {
            background-size: 100% 0px;
            border-bottom: 1px solid #f7f7f7;
        }

        .pickerColor>p span:last-child {
            float: right;
        }

        .pickerColor>p span:first-child {
            float: left;
        }

        .item .first {

            color: #333;
        }

        .item .second {
            color: #9e9e9e;
        }

        .um-footer {
            min-height: 0px;
        }

        .item input {
            border: none;
            height: .5rem;
            width: 4.6rem;
            text-align: right;
            line-height: .5rem;
            outline: none;
            margin-top: .2rem;
            font-size: 0.28rem;
        }
        .um-bf2.tr {
            overflow: hidden;
            text-overflow:ellipsis;
            white-space: nowrap;
        }
    </style>
</head>

<body>
    <div class="um-win" id="app" v-cloak>
        <div class="um-content">
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1 mr5">姓名</span>
                <input v-if="CSTATUS==0" placeholder="请输入姓名" v-model="message.CR_BECR_NAME" type="text">
                <span v-else class="um-bf3 tr">{{message.CR_BECR_NAME}}</span>
            </div>
            <div @click="surePickerZJType" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">证件类型</span>
                    <span class="um-bf1 tr">
                        <span v-if="message.CR_ID_CARD_TYPE_NAME" class="first">{{ message.CR_ID_CARD_TYPE_NAME }}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">证件号码</span>
                <input v-if="CSTATUS==0" placeholder="请输入证件号码" v-model="message.CR_NATU_IDCARD" type="text">
                <span v-else class="um-bf3 tr">{{message.CR_NATU_IDCARD}}</span>
            </div>
            <div @click="surePickerKehuType" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">客户分类</span>
                    <span class="um-bf1 tr">
                        <span v-if="message.CR_CUST_LEVEL_NAME" class="first">{{ message.CR_CUST_LEVEL_NAME }}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">手机号码</span>
                <input v-if="CSTATUS==0" placeholder="请输入手机号码" v-model="message.CR_NATU_MOBILE" type="number">
                <span v-else class="um-bf3 tr">{{message.CR_NATU_MOBILE}}</span>
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">客户类型</span>
                <input placeholder="请输入客户类型" v-model="CR_BECR_TYPE" type="text">
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">工作单位</span>
                <input placeholder="请输入工作单位" v-model="message.CR_NATU_WORK_UNITS" type="text">
            </div>
            <div @click="surePickerSex" class="item">
                <p class="pl10 pr10 um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">性别</span>
                    <span class="um-bf1 tr">
                        <span v-if="message.CR_NATU_SEX" class="first">{{ message.CR_NATU_SEX }}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">电子邮箱</span>
                <input placeholder="请输入电子邮箱" v-model="message.EMPLOYEE_EMAIL" type="text">
            </div>
            <div @click="surePickerBirthday" class="item">
                <p class="pl10 pr10 um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">出生日期</span>
                    <span class="um-bf1 tr">
                        <span v-if="message.CR_NATU_SEX" class="first">{{ message.CR_BIRTH_DATE }}</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">最高学历</span>
                    <span class="um-bf1 tr">
                        <span v-if="message.CR_EDUCATION_NAME" class="first">{{message.CR_EDUCATION_NAME}}</span>
                      <span v-else class="second">请选择</span> 
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerDD" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">最高学位</span>
                    <span class="um-bf1 tr">
                        <span v-if="message.CR_NATU_EDUDEGREE" class="first">{{message.CR_NATU_EDUDEGREE}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerZC" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">职称</span>
                    <span class="um-bf1 tr">
                        <span v-if="message.CR_NATU_CASTE_NAME" class="first">{{message.CR_NATU_CASTE_NAME}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerHY" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">所属行业</span>
                    <span class="um-bf2 tr">
                        <span v-if="message.CR_TRADE_TYPE_NAME" class="first">{{message.CR_TRADE_TYPE_NAME}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerZW" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">职务</span>
                    <span class="um-bf2 tr">
                        <span v-if="message.CR_NATU_POSITION_NAME" class="first">{{message.CR_NATU_POSITION_NAME}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerZYType" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">职业类型</span>
                    <span class="um-bf2 tr">
                        <span v-if="message.CR_TYPE_OCCUPATION_NAME" class="first">{{message.CR_TYPE_OCCUPATION_NAME}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerFCType" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">房产类型</span>
                    <span class="um-bf2 tr">
                        <span v-if="message.CR_NATU_MATE_PROPERTY_NAME" class="first">{{message.CR_NATU_MATE_PROPERTY_NAME}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerDK" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">贷款</span>
                    <span class="um-bf2 tr">
                        <span v-if="message.MAILING_LOAN" class="first">{{message.MAILING_LOAN}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerYQ" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">贷款是否有过逾期</span>
                    <span class="um-bf2 tr">
                        <span v-if="message.MAILING_LOANS_OVERDUE" class="first">{{message.MAILING_LOANS_OVERDUE}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerDJ" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">贷记卡</span>
                    <span class="um-bf2 tr">
                        <span v-if="message.MAILING_CREDIT" class="first">{{message.MAILING_CREDIT}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerDJYQ" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf2">贷记卡是否有过逾期</span>
                    <span class="um-bf2 tr">
                        <span v-if="message.MAILING_CREDIT_OVERDUE" class="first">{{message.MAILING_CREDIT_OVERDUE}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div @click="surePickerPO" class="item">
                <p class="pl10 pr10  um-box">
                    <span class="um-red mr5 fl">*</span>
                    <span class="um-bf1">婚姻状况</span>
                    <span class="um-bf2 tr">
                        <span v-if="message.CR_MARRIAGE_STATE_NAME" class="first">{{message.CR_MARRIAGE_STATE_NAME}}</span>
                        <span v-else class="second">请选择</span>
                        <i class="icon iconfont icon-enter"></i>
                    </span>
                </p>
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">身份证地址</span>
                <input placeholder="请输入身份证地址" v-model="message.EMPLOYEE_ID_CARD_ADDR" type="text">
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">家庭地址</span>
                <input placeholder="请输入家庭地址" v-model="message.CR_NATU_HOME_ADDRESS" type="text">
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">邮寄地址</span>
                <input placeholder="请输入邮寄地址" v-model="message.MAILING_ADDRESS_DZ" type="text">
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">单位地址</span>
                <input placeholder="请输入单位地址" v-model="message.CR_NATU_WORK_ADDRESS" type="text">
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">家庭地址邮编</span>
                <input placeholder="请输入家庭地址邮编" v-model="message.CR_NATU_ZIP" type="number">
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">邮寄地址邮编</span>
                <input placeholder="请输入邮寄地址邮编" v-model="message.CR_NATU_POSITION_ZIPCODE" type="number">
            </div>
            <div class="item um-box pl10 pr10">
                <span class="um-red mr5">*</span>
                <span class="um-bf1">单位地址邮编</span>
                <input placeholder="请输入单位地址邮编" v-model="message.CR_CORP_COMPANY_ZIP" type="number">
            </div>
        </div>
        <div class="um-footer">
            <!-- 客户分类 -->
            <mt-popup v-model="pickerKehuTypeShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots0" @change="onValuesChange0"></mt-picker>
                <p>
                    <span class="" @click="surePickerKehuType">取消</span>
                    <span class="" @click="surePickerKehuType('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 证件类型 -->
            <mt-popup v-model="pickerZJTypeShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots1" @change="onValuesChange1"></mt-picker>
                <p>
                    <span class="" @click="surePickerZJType">取消</span>
                    <span class="" @click="surePickerZJType('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 性别 -->
            <mt-popup v-model="pickerSexShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots2" @change="onValuesChange2"></mt-picker>
                <p>
                    <span class="" @click="surePickerSex">取消</span>
                    <span class="" @click="surePickerSex('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 出生日期 -->
            <mt-datetime-picker 
                ref="picker" 
                v-model="pickerValue" 
                type="date" 
                cancel-text='取消' 
                confirm-text='确定' 
                :start-date='new Date("1950-01-01")'
                :end-date="new Date()" 
                @confirm="handleConfirm"
            ></mt-datetime-picker>
            <!-- 学历 -->
            <mt-popup v-model="pickerXLShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots3" @change="onValuesChange3"></mt-picker>
                <p>
                    <span class="" @click="surePickerXL">取消</span>
                    <span class="" @click="surePickerXL('confirm')">确定</span>
                </p>
            </mt-popup>
              <!-- 学位 -->
              <mt-popup v-model="pickerDDShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots111" @change="onValuesChange111"></mt-picker>
                <p>
                    <span class="" @click="surePickerDD">取消</span>
                    <span class="" @click="surePickerDD('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 职称 -->
            <mt-popup v-model="pickerZCShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots4" @change="onValuesChange4"></mt-picker>
                <p>
                    <span class="" @click="surePickerZC">取消</span>
                    <span class="" @click="surePickerZC('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 所属行业 -->
            <mt-popup v-model="pickerHYShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots5" @change="onValuesChange5"></mt-picker>
                <p>
                    <span class="" @click="surePickerHY">取消</span>
                    <span class="" @click="surePickerHY('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 职务 -->
            <mt-popup v-model="pickerZWShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots6" @change="onValuesChange6"></mt-picker>
                <p>
                    <span class="" @click="surePickerZW">取消</span>
                    <span class="" @click="surePickerZW('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 职业类型 -->
            <mt-popup v-model="pickerZYTypeShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots7" @change="onValuesChange7"></mt-picker>
                <p>
                    <span class="" @click="surePickerZYType">取消</span>
                    <span class="" @click="surePickerZYType('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 房产类型 -->
            <mt-popup v-model="pickerFCTypeShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots8" @change="onValuesChange8"></mt-picker>
                <p>
                    <span class="" @click="surePickerFCType">取消</span>
                    <span class="" @click="surePickerFCType('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 贷款 -->
            <mt-popup v-model="pickerDKShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots9" @change="onValuesChange9"></mt-picker>
                <p>
                    <span class="" @click="surePickerDK">取消</span>
                    <span class="" @click="surePickerDK('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 贷款是否有过逾期 -->
            <mt-popup v-model="pickerYQShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots10" @change="onValuesChange10"></mt-picker>
                <p>
                    <span class="" @click="surePickerYQ">取消</span>
                    <span class="" @click="surePickerYQ('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 贷记卡 -->
            <mt-popup v-model="pickerDJShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots11" @change="onValuesChange11"></mt-picker>
                <p>
                    <span class="" @click="surePickerDJ">取消</span>
                    <span class="" @click="surePickerDJ('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 贷记卡是否有过逾期 -->
            <mt-popup v-model="pickerDJYQShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots12" @change="onValuesChange12"></mt-picker>
                <p>
                    <span class="" @click="surePickerDJYQ">取消</span>
                    <span class="" @click="surePickerDJYQ('confirm')">确定</span>
                </p>
            </mt-popup>
            <!-- 婚姻状况 -->
            <mt-popup v-model="pickerPOShow" position="bottom" class="pickerColor">
                <mt-picker :slots="slots13" @change="onValuesChange13"></mt-picker>
                <p>
                    <span class="" @click="surePickerPO">取消</span>
                    <span class="" @click="surePickerPO('confirm')">确定</span>
                </p>
            </mt-popup>
        </div>
    </div>
    <script src="../../js/summer.js"></script>
    <script src="../../js/jquery.min.js"></script>
    <script src="../../js/vue.js"></script>
    <script src="../../js/mint.js"></script>
    <script src="../../js/common.js"></script>
    <script>
        var newCreateCustom = new Vue({
            el: '#app',
            data: function () {
                return {
                    // 客户分类
                    pickerKehuTypeShow: false,
                    pickerKehuType: "",
                    slots0: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 证件类型
                    pickerZJTypeShow: false,
                    pickerZJType: "",
                    slots1: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 性别
                    pickerSexShow: false,
                    pickerSex: "",
                    slots2: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 生日
                    pickerBirthday: false,
                    pickerValue: new Date(),
                    // 学历
                    pickerXLShow: false,
                    pickerXL: "",
                    slots3: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    //学位
                    pickerDDShow: false,
                    pickerDD: "",
                    slots111: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],

                    // 职称
                    pickerZCShow: false,
                    pickerZC: "",
                    slots4: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 行业
                    pickerHYShow: false,
                    pickerHY: "",
                    slots5: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 职务
                    pickerZWShow: false,
                    pickerZW: "",
                    slots6: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 职业类型
                    pickerZYTypeShow: false,
                    pickerZYType: "",
                    slots7: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 房产类型
                    pickerFCTypeShow: false,
                    pickerFCType: "",
                    slots8: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 贷款
                    pickerDKShow: false,
                    pickerDK: "",
                    slots9: [{
                        flex: 1,
                        values: ['有', '无'],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 贷款是否有过逾期
                    pickerYQShow: false,
                    pickerYQ: "",
                    slots10: [{
                        flex: 1,
                        values: ['有', '无'],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 贷记卡
                    pickerDJShow: false,
                    pickerDJ: "",
                    slots11: [{
                        flex: 1,
                        values: ['有', '无'],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 贷记卡是否有过逾期
                    pickerDJYQShow: false,
                    pickerDJYQ: "",
                    slots12: [{
                        flex: 1,
                        values: ['有', '无'],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 婚姻状况
                    pickerPOShow: false,
                    pickerPO: "",
                    slots13: [{
                        flex: 1,
                        values: [],
                        defaultIndex: 0,
                        className: 'slot1',
                        textAlign: 'center'
                    }],
                    // 信息详情
                    message: {
                        // 客户姓名
                        CR_BECR_NAME: "",
                        // 证件类型
                        CR_ID_CARD_TYPE_NAME: "",
                        // 证件号码
                        CR_NATU_IDCARD: "",
                        // 客户分类
                        CR_CUST_LEVEL_NAME: "",
                        // 手机号码
                        CR_NATU_MOBILE: "",
                        // 客户类型
                        CR_BECR_TYPE: "",
                        //最高学位
                        CR_NATU_EDUDEGREE:"",
                        // 工作单位
                        CR_NATU_WORK_UNITS: "",
                        // 性别
                        CR_NATU_SEX: "",
                        // 电子邮箱
                        EMPLOYEE_EMAIL: "",
                        // 出生日期
                        CR_BIRTH_DATE: "",
                        // 最高学历
                        CR_EDUCATION_NAME: "",
                        // 职称
                        CR_NATU_CASTE_NAME: "",
                        // 所属行业
                        CR_TRADE_TYPE_NAME: "",
                        // 职务
                        CR_NATU_POSITION_NAME: "",
                        // 职业类型
                        CR_TYPE_OCCUPATION_NAME: "",
                        // 房产类型
                        CR_NATU_MATE_PROPERTY_NAME: "",
                        // 贷款
                        MAILING_LOAN: "",
                        // 贷款是否逾期
                        MAILING_LOANS_OVERDUE: "",
                        // 贷记卡
                        MAILING_CREDIT: "",
                        // 贷记卡是否逾期
                        MAILING_CREDIT_OVERDUE: "",
                        // 婚姻状况
                        CR_MARRIAGE_STATE_NAME: "",
                        // 身份证地址
                        EMPLOYEE_ID_CARD_ADDR: "",
                        // 家庭地址
                        CR_NATU_HOME_ADDRESS: "",
                        // 邮寄地址
                        MAILING_ADDRESS_DZ: "",
                        // 单位地址
                        CR_NATU_WORK_ADDRESS: "",
                        // 家庭地址邮编
                        CR_NATU_ZIP: "",
                        // 邮寄地址邮编
                        CR_NATU_POSITION_ZIPCODE: "",
                        // 单位地址邮编
                        CR_CORP_COMPANY_ZIP: ""
                    },
                    // 全部数据
                    totalData: '',
                    // 配偶信息
                    spoustObjMes: "",
                    // 页面来源
                    sourceFrom: '',
                    // 客户ID
                    clintId: '',
                    // 根据这个判断是否打开配偶验证页
                    isAdd: '',
                    // 客户类型
                    CR_BECR_TYPE: "",
                    // 登陆人ID（EMPLOYEE_ID）
                    USER_ID: "",
                    // 客户状态 CSTATUS=1 为正式客户 CSTATUS=0为意向客户
                    CSTATUS: ""
                }
            },
            methods: {
                // 自然人客户信息
                getData: function (projectId, clintId, type) {
                    var self = this;
                    var CR_BECR_TYPE = (type == "自然人" ? 1 : 2);
                    ajaxRequest({
                        type: 'post',
                        url: 'customer/doCustomerPage',
                        param: {
                            "CUSTOMER_ID": clintId,
                            "CR_BECR_TYPE": CR_BECR_TYPE
                        }
                    }, function (res) {
                        summer.hideProgress();
                        if (res.data.flag == 1) {
                            // 判断是否有配偶，设置navBar
                            if (res.data.datas.custInfoDetails) {
                                if (res.data.datas.custInfoDetails.CR_MARRIAGE_STATE_NAME == "已婚" || res.data.datas.custInfoDetails.CR_MARRIAGE_STATE_NAME == "复婚" || res.data.datas.custInfoDetails.CR_MARRIAGE_STATE_NAME == "再婚" || res.data.datas.custInfoDetails.CR_MARRIAGE_STATE_NAME == "初婚") {
                                    // 有配偶
                                    summer.setWinAttr({
                                        actionBar: {
                                            title: "客户信息",
                                            titleColor: "#ffffff",
                                            backgroundColor: "#039be5",
                                            leftItem: {
                                                image: "img/back.png",
								                text: "返回",
								                method: "",
                                                textColor: "#ffffff"
								            },
                                            rightItems: [{
                                                type: "text",
                                                text: "下一步",
                                                textColor: "#ffffff",
                                                method: "nextStopAction()"
                                            }]
                                        }
                                    });
                                } else {
                                    // 无配偶
                                    summer.setWinAttr({
                                        actionBar: {
                                            title: "客户信息",
                                            titleColor: "#ffffff",
                                            backgroundColor: "#039be5",
                                            leftItem: {
                                                image: "img/back.png",
								                text: "返回",
								                method: "",
                                                textColor: "#ffffff"
								            },
                                            rightItems: [{
                                                type: "text",
                                                text: "保存",
                                                textColor: "#ffffff",
                                                method: "savePerson()"
                                            }]
                                        }
                                    });
                                }
                            }
                            // 总数据
                            self.totalData = res.data.datas;
                            // 信息详情展示字段
                            if (res.data.datas.custInfoDetails) {
                                self.message = res.data.datas.custInfoDetails;
                            }
                            // 客户分类slots0
                            res.data.datas.CR_CUST_LEVEL_DIC.forEach(function (e) {
                                self.slots0[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_CUST_LEVEL_NAME) {
                                    self.message.CR_CUST_LEVEL_NAME = e.FLAG;
                                }
                            });
                            // 证件类型slots1
                            res.data.datas.CR_ID_CARD_TYPE_DIC.forEach(function (e) {
                                self.slots1[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_ID_CARD_TYPE_NAME) {
                                    self.message.CR_ID_CARD_TYPE_NAME = e.FLAG;
                                }
                            });
                            // 性别slots2
                            res.data.datas.SEX_DIC.forEach(function (e) {
                                self.slots2[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_NATU_SEX) {
                                    self.message.CR_NATU_SEX = e.FLAG;
                                }
                            });
                            // 学历slots3
                            res.data.datas.CR_EDUCATION_DIC.forEach(function (e) {
                                self.slots3[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_EDUCATION_NAME) {
                                    self.message.CR_EDUCATION_NAME = e.FLAG;
                                }
                            });
                            // 职称slots4
                            res.data.datas.CR_NATU_CASTE_DIC.forEach(function (e) {
                                self.slots4[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_NATU_CASTE_NAME) {
                                    self.message.CR_NATU_CASTE_NAME = e.FLAG;
                                }
                            });
                            // 行业slots5
                            res.data.datas.CR_TRADE_TYPE_DIC.forEach(function (e) {
                                self.slots5[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_TRADE_TYPE_NAME) {
                                    self.message.CR_TRADE_TYPE_NAME = e.FLAG;
                                }
                            });
                            // 职务slots6
                            res.data.datas.CR_NATU_POSITION_DIC.forEach(function (e) {
                                self.slots6[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_NATU_POSITION_NAME) {
                                    self.message.CR_NATU_POSITION_NAME = e.FLAG;
                                }
                            });
                            // 职业类型slots7
                            res.data.datas.CR_TYPE_OCCUPATION_DIC.forEach(function (e) {
                                self.slots7[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_TYPE_OCCUPATION_NAME) {
                                    self.message.CR_TYPE_OCCUPATION_NAME = e.FLAG;
                                }
                            });
                            // 房产类型slots8
                            res.data.datas.PROPERTY_TYPE_DIC.forEach(function (e) {
                                self.slots8[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_NATU_MATE_PROPERTY_NAME) {
                                    self.message.CR_NATU_MATE_PROPERTY_NAME = e.FLAG;
                                }
                            });
                            // 婚姻状况slots13
                            res.data.datas.CR_MARRIAGE_STATE_DIC.forEach(function (e) {
                                self.slots13[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_MARRIAGE_STATE_NAME) {
                                    self.message.CR_MARRIAGE_STATE_NAME = e.FLAG;
                                }
                            });
                            // 邮寄地址字典查询
                            res.data.datas.CR_MAILING_ADDRESS_DIC.forEach(function (e) {
                                if (e.CODE == self.message.MAILING_ADDRESS_DZ) {
                                    self.message.MAILING_ADDRESS_DZ = e.FLAG;
                                }
                            });
                            //最高学位
                            console.log("最高学位字段",res.data.datas.CR_NATU_EDUDEGREE_DIC)
                            console.log("最高学位字段",self.message.CR_NATU_EDUDEGREE)
                            res.data.datas.CR_NATU_EDUDEGREE_DIC.forEach(function (e) {
                                self.slots111[0].values.push(e.FLAG);
                                if (e.CODE == self.message.CR_NATU_EDUDEGREE) {
                                    self.message.CR_NATU_EDUDEGREE = e.FLAG;
                                }
                            });
                        } else {
                            summer.toast({
                                msg: "获取客户信息失败"
                            });
                        }
                    }, function (err) {
                        console.log(err);
                        summer.hideProgress();
                    });
                },
                // 客户分类更改
                onValuesChange0: function (picker, values) {
                    this.pickerKehuType = values[0];
                },
                surePickerKehuType: function (param) {
                    var self = this;
                    this.pickerKehuTypeShow = !this.pickerKehuTypeShow;
                    if (param == 'confirm') {
                        this.message.CR_CUST_LEVEL_NAME = this.pickerKehuType;
                    }
                },
                // 证件类型更改
                onValuesChange1: function (picker, values) {
                    this.pickerZJType = values[0];
                },
                surePickerZJType: function (param) {
                    var self = this;
                    this.pickerZJTypeShow = !this.pickerZJTypeShow;
                    if (param == 'confirm') {
                        this.message.CR_ID_CARD_TYPE_NAME = this.pickerZJType;
                    }
                },
                // 性别更改
                onValuesChange2: function (picker, values) {
                    this.pickerSex = values[0];
                },
                surePickerSex: function (param) {
                    var self = this;
                    this.pickerSexShow = !this.pickerSexShow;
                    if (param == 'confirm') {
                        this.message.CR_NATU_SEX = this.pickerSex;
                    }
                },
                // 学历更改
                onValuesChange3: function (picker, values) {
                    this.pickerXL = values[0];
                },
                surePickerXL: function (param) {
                    var self = this;
                    this.pickerXLShow = !this.pickerXLShow;
                    if (param == 'confirm') {
                        this.message.CR_EDUCATION_NAME = this.pickerXL;
                    }
                },
                //最高学历
                onValuesChange111: function (picker, values) {
                    this.pickerDD = values[0];
                },
                surePickerDD: function (param) {
                    var self = this;
                    this.pickerDDShow = !this.pickerDDShow;
                    if (param == 'confirm') {
                        this.message.CR_NATU_EDUDEGREE = this.pickerDD;
                    }
                },
                // 职称更改
                onValuesChange4: function (picker, values) {
                    this.pickerZC = values[0];
                },
                surePickerZC: function (param) {
                    var self = this;
                    this.pickerZCShow = !this.pickerZCShow;
                    if (param == 'confirm') {
                        this.message.CR_NATU_CASTE_NAME = this.pickerZC;
                    }
                },
               
                // 行业更改
                onValuesChange5: function (picker, values) {
                    this.pickerHY = values[0];
                },
                surePickerHY: function (param) {
                    var self = this;
                    this.pickerHYShow = !this.pickerHYShow;
                    if (param == 'confirm') {
                        this.message.CR_TRADE_TYPE_NAME = this.pickerHY;
                    }
                },
                // 职务更改
                onValuesChange6: function (picker, values) {
                    this.pickerZW = values[0];
                },
                surePickerZW: function (param) {
                    var self = this;
                    this.pickerZWShow = !this.pickerZWShow;
                    if (param == 'confirm') {
                        this.message.CR_NATU_POSITION_NAME = this.pickerZW;
                    }
                },
                // 职业类型更改
                onValuesChange7: function (picker, values) {
                    this.pickerZYType = values[0];
                },
                surePickerZYType: function (param) {
                    var self = this;
                    this.pickerZYTypeShow = !this.pickerZYTypeShow;
                    if (param == 'confirm') {
                        this.message.CR_TYPE_OCCUPATION_NAME = this.pickerZYType;
                    }
                },
                // 房产类型更改
                onValuesChange8: function (picker, values) {
                    this.pickerFCType = values[0];
                },
                surePickerFCType: function (param) {
                    var self = this;
                    this.pickerFCTypeShow = !this.pickerFCTypeShow;
                    if (param == 'confirm') {
                        this.message.CR_NATU_MATE_PROPERTY_NAME = this.pickerFCType;
                    }
                },
                // 贷款更改
                onValuesChange9: function (picker, values) {
                    this.pickerDK = values[0];
                },
                surePickerDK: function (param) {
                    var self = this;
                    this.pickerDKShow = !this.pickerDKShow;
                    if (param == 'confirm') {
                        this.message.MAILING_LOAN = this.pickerDK;
                    }
                },
                // 贷款是否有过逾期更改
                onValuesChange10: function (picker, values) {
                    this.pickerYQ = values[0];
                },
                surePickerYQ: function (param) {
                    var self = this;
                    this.pickerYQShow = !this.pickerYQShow;
                    if (param == 'confirm') {
                        this.message.MAILING_LOANS_OVERDUE = this.pickerYQ;
                    }
                },
                // 贷记卡更改
                onValuesChange11: function (picker, values) {
                    this.pickerDJ = values[0];
                },
                surePickerDJ: function (param) {
                    var self = this;
                    this.pickerDJShow = !this.pickerDJShow;
                    if (param == 'confirm') {
                        this.message.MAILING_CREDIT = this.pickerDJ;
                    }
                },
                // 贷记卡是否有过逾期更改
                onValuesChange12: function (picker, values) {
                    this.pickerDJYQ = values[0];
                },
                surePickerDJYQ: function (param) {
                    var self = this;
                    this.pickerDJYQShow = !this.pickerDJYQShow;
                    if (param == 'confirm') {
                        this.message.MAILING_CREDIT_OVERDUE = this.pickerDJYQ;
                    }
                },
                // 婚姻状况更改
                onValuesChange13: function (picker, values) {
                    this.pickerPO = values[0];
                },
                surePickerPO: function (param) {
                    var self = this;
                    var result;
                    this.pickerPOShow = !this.pickerPOShow;
                    if (param == 'confirm') {
                        this.message.CR_MARRIAGE_STATE_NAME = this.pickerPO;
                        this.totalData.CR_MARRIAGE_STATE_DIC.forEach(function (e) {
                            if (e.FLAG == self.pickerPO) {
                                result = e.CODE;
                            }
                        });
                        if (result == "3" || result == "23" || result == "22" || result == "21") {
                            // 有配偶
                            summer.setWinAttr({
                                actionBar: {
                                    title: "客户信息",
                                    titleColor: "#ffffff",
                                    backgroundColor: "#039be5",
                                    leftItem: {
                                        image: "img/back.png",
                                        text: "返回",
                                        method: "",
                                        textColor: "#ffffff"
                                    },
                                    rightItems: [{
                                        type: "text",
                                        text: "下一步",
                                        textColor: "#ffffff",
                                        method: "nextStopAction()"
                                    }]
                                }
                            });
                        } else {
                            // 无配偶
                            summer.setWinAttr({
                                actionBar: {
                                    title: "客户信息",
                                    titleColor: "#ffffff",
                                    backgroundColor: "#039be5",
                                    leftItem: {
                                        image: "img/back.png",
                                        text: "返回",
                                        method: "",
                                        textColor: "#ffffff"
                                    },
                                    rightItems: [{
                                        type: "text",
                                        text: "保存",
                                        textColor: "#ffffff",
                                        method: "savePerson()"
                                    }]
                                }
                            });
                        }
                    }
                },
                // 日期更改
                surePickerBirthday: function () {
					this.pickerBirthday = !this.pickerBirthday;
					this.$refs.picker.open();
				},
                handleConfirm: function (pickerValue) {
                    this.pickerValue = pickerValue;
                    var result = this.getFormatDate(pickerValue);
                    this.message.CR_BIRTH_DATE = result;
                },
                getFormatDate: function (date) {
                    var date = new Date(date),
                        seperator1 = "-";
                    var year = date.getFullYear(),
                        month = date.getMonth() + 1,
                        strDate = date.getDate();
                    if (month >= 1 && month <= 9) {
                        month = "0" + month;
                    }
                    if (strDate >= 0 && strDate <= 9) {
                        strDate = "0" + strDate;
                    }
                    return year + '-' + month + '-' + strDate;
                },
                // 校验（true/false）
                messageTest: function () {
                    var regCard = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/; //身份证校验
                    var phoneCard = /^[1][3,4,5,7,8,9][0-9]{9}$/;
                    if (!this.message.CR_ID_CARD_TYPE_NAME) {
                        summer.toast({
                            msg: "请选择证件类型"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_IDCARD) {
                        summer.toast({
                            msg: "请输入证件号码"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_EDUDEGREE) {
                        summer.toast({
                            msg: "请输入最高学位"
                        });
                        return false;
                    }  else if (this.message.CR_ID_CARD_TYPE_NAME == "身份证" && !regCard.test(this.message.CR_NATU_IDCARD)) {
                        summer.toast({
                            msg: "身份证号格式有误"
                        });
                        return false;
                    }else if (!this.message.CR_CUST_LEVEL_NAME) {
                        summer.toast({
                            msg: "请选择客户分类"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_MOBILE) {
                        summer.toast({
                            msg: "请输入手机号码"
                        });
                        return false;
                    } else if (!phoneCard.test(this.message.CR_NATU_MOBILE)) {
                        summer.toast({
                            msg: "手机号码格式有误"
                        });
                        return false;
                    } else if (!this.CR_BECR_TYPE) {
                        summer.toast({
                            msg: "请输入客户类型"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_WORK_UNITS) {
                        summer.toast({
                            msg: "请输入工作单位"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_SEX) {
                        summer.toast({
                            msg: "请选择性别"
                        });
                        return false;
                    } else if (!this.message.EMPLOYEE_EMAIL) {
                        summer.toast({
                            msg: "请输入电子邮箱"
                        });
                        return false;
                    } else if (!this.message.CR_BIRTH_DATE) {
                        summer.toast({
                            msg: "请选择出生日期"
                        });
                        return false;
                    } else if (!this.message.CR_EDUCATION_NAME) {
                        summer.toast({
                            msg: "请选择最高学历"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_CASTE_NAME) {
                        summer.toast({
                            msg: "请选择职称"
                        });
                        return false;
                    } else if (!this.message.CR_TRADE_TYPE_NAME) {
                        summer.toast({
                            msg: "请选择所属行业"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_POSITION_NAME) {
                        summer.toast({
                            msg: "请选择职务"
                        });
                        return false;
                    } else if (!this.message.CR_TYPE_OCCUPATION_NAME) {
                        summer.toast({
                            msg: "请选择职业类型"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_MATE_PROPERTY_NAME) {
                        summer.toast({
                            msg: "请选择房产类型"
                        });
                        return false;
                    } else if (!this.message.MAILING_LOAN) {
                        summer.toast({
                            msg: "请选择是否有贷款"
                        });
                        return false;
                    } else if (this.message.MAILING_LOAN == "有" && !this.message.MAILING_LOANS_OVERDUE) {
                        summer.toast({
                            msg: "请选择贷款是否逾期"
                        });
                        return false;
                    }else if (!this.message.MAILING_CREDIT) {
                        summer.toast({
                            msg: "请选择是否有贷记卡"
                        });
                        return false;
                    } else if (this.message.MAILING_CREDIT == "有" && !this.message.MAILING_CREDIT_OVERDUE) {
                        summer.toast({
                            msg: "请选择贷记卡是否逾期"
                        });
                        return false;
                    } else if (!this.message.CR_MARRIAGE_STATE_NAME) {
                        summer.toast({
                            msg: "请选择婚姻状况"
                        });
                        return false;
                    } else if (!this.message.EMPLOYEE_ID_CARD_ADDR) {
                        summer.toast({
                            msg: "请输入身份证地址"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_HOME_ADDRESS) {
                        summer.toast({
                            msg: "请输入家庭地址"
                        });
                        return false;
                    } else if (!this.message.MAILING_ADDRESS_DZ) {
                        summer.toast({
                            msg: "请输入邮寄地址"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_WORK_ADDRESS) {
                        summer.toast({
                            msg: "请输入单位地址"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_ZIP) {
                        summer.toast({
                            msg: "请输入家庭地址邮编"
                        });
                        return false;
                    } else if (!(/^[0-9]{6}$/.test(this.message.CR_NATU_ZIP))) {
                        summer.toast({
                            msg: "家庭地址邮编有误,请重新输入"
                        });
                        return false;
                    } else if (!this.message.CR_NATU_POSITION_ZIPCODE) {
                        summer.toast({
                            msg: "请输入邮寄地址邮编"
                        });
                        return false;
                    } else if (!(/^[0-9]{6}$/.test(this.message.CR_NATU_POSITION_ZIPCODE))) {
                        summer.toast({
                            msg: "邮寄地址邮编有误,请重新输入"
                        });
                        return false;
                    } else if (!this.message.CR_CORP_COMPANY_ZIP) {
                        summer.toast({
                            msg: "请输入单位地址邮编"
                        });
                        return false;
                    }else if (!(/^[0-9]{6}$/.test(this.message.CR_CORP_COMPANY_ZIP))) {
                        summer.toast({
                            msg: "单位地址邮编有误,请重新输入"
                        });
                        return false;
                    }
                    return true;
                },
                // 此客户需要保存的字段信息
                saveParams: function () {
                    var self = this;
                    var params = {};
                    params.USER_ID = this.USER_ID; // 登录人ID
                    params.CUSTOMER_ID = this.clintId; // 客户ID	
                    params.CR_BECR_NAME = this.message.CR_BECR_NAME; // 客户姓名
                    params.CR_NATU_IDCARD = this.message.CR_NATU_IDCARD; // 客户身份证号
                    params.CR_NATU_MOBILE = this.message.CR_NATU_MOBILE; // 客户手机号
                    params.CR_BECR_TYPE = this.CR_BECR_TYPE == "自然人" ? 1 : 2; // 客户类型
                    params.CR_NATU_WORK_UNITS = this.message.CR_NATU_WORK_UNITS; // 工作单位
                    // 客户分类
                    if (this.totalData.CR_CUST_LEVEL_DIC.some(function (e) {return e.FLAG == self.message.CR_CUST_LEVEL_NAME})) {
                        this.totalData.CR_CUST_LEVEL_DIC.forEach(function (e) {
                            if (e.FLAG == self.message.CR_CUST_LEVEL_NAME) {
                                params.CR_CUST_LEVEL = e.CODE;
                            }
                        });
                    } else {
                        params.CR_CUST_LEVEL = self.message.CR_CUST_LEVEL;
                    }
                   
                    // 性别
                    this.totalData.SEX_DIC.forEach(function (e) {
                        if (e.FLAG == self.message.CR_NATU_SEX) {
                            params.CR_NATU_SEX = e.CODE;
                        }
                    });
                    params.EMPLOYEE_EMAIL = this.message.EMPLOYEE_EMAIL; // 电子邮箱
                    // 证件类型
                    if (this.totalData.CR_ID_CARD_TYPE_DIC.some(function (e) {return e.FLAG == self.message.CR_ID_CARD_TYPE_NAME})) {
                        this.totalData.CR_ID_CARD_TYPE_DIC.forEach(function (e) {
                            if (e.FLAG == self.message.CR_ID_CARD_TYPE_NAME) {
                                params.CR_ID_CARD_TYPE = e.CODE;
                            }
                        });
                    } else {
                        params.CR_ID_CARD_TYPE = self.message.CR_ID_CARD_TYPE;
                    }
                    params.CR_BIRTH_DATE = this.message.CR_BIRTH_DATE; // 出生日期
                    // 最高学历
                    if (this.totalData.CR_EDUCATION_DIC.some(function (e) {return e.FLAG == self.message.CR_EDUCATION_NAME})) {
                        this.totalData.CR_EDUCATION_DIC.forEach(function (e) {
                            if (e.FLAG == self.message.CR_EDUCATION_NAME) {
                                params.CR_EDUCATION = e.CODE;
                            }
                        });
                    } else {
                        params.CR_EDUCATION = self.message.CR_EDUCATION;
                    }
                     // 最高学历
                     if (this.totalData.CR_NATU_EDUDEGREE_DIC.some(function (e) {return e.FLAG == self.message.CR_NATU_EDUDEGREE})) {
                        this.totalData.CR_NATU_EDUDEGREE_DIC.forEach(function (e) {
                            if (e.FLAG == self.message.CR_NATU_EDUDEGREE) {
                                params.CR_NATU_EDUDEGREE = e.CODE;
                            }
                        });
                    } else {
                        params.CR_NATU_EDUDEGREE = self.message.CR_EDUCATION;
                    }
                    // 职称
                    if (this.totalData.CR_NATU_CASTE_DIC.some(function (e) {return e.FLAG == self.message.CR_NATU_CASTE_NAME})) {
                        this.totalData.CR_NATU_CASTE_DIC.forEach(function (e) {
                            if (e.FLAG == self.message.CR_NATU_CASTE_NAME) {
                                params.CR_NATU_CASTE = e.CODE;
                            }
                        });
                    } else {
                        params.CR_NATU_CASTE = self.message.CR_NATU_CASTE;
                    }
                    // 行业
                    if (this.totalData.CR_TRADE_TYPE_DIC.some(function (e) {return e.FLAG == self.message.CR_TRADE_TYPE_NAME})) {
                        this.totalData.CR_TRADE_TYPE_DIC.forEach(function (e) {
                            if (e.FLAG == self.message.CR_TRADE_TYPE_NAME) {
                                params.CR_TRADE_TYPE = e.CODE;
                            }
                        });
                    } else {
                        params.CR_TRADE_TYPE = self.message.CR_TRADE_TYPE;
                    }
                    // 职务
                    if (this.totalData.CR_NATU_POSITION_DIC.some(function (e) {return e.FLAG == self.message.CR_NATU_POSITION_NAME})) {
                        this.totalData.CR_NATU_POSITION_DIC.forEach(function (e) {
                            if (e.FLAG == self.message.CR_NATU_POSITION_NAME) {
                                params.CR_NATU_POSITION = e.CODE;
                            }
                        });
                    } else {
                        params.CR_NATU_POSITION = self.message.CR_NATU_POSITION;
                    }
                    // 职业类型
                    if (this.totalData.CR_TYPE_OCCUPATION_DIC.some(function (e) {return e.FLAG == self.message.CR_TYPE_OCCUPATION_NAME})) {
                        this.totalData.CR_TYPE_OCCUPATION_DIC.forEach(function (e) {
                            if (e.FLAG == self.message.CR_TYPE_OCCUPATION_NAME) {
                                params.CR_TYPE_OCCUPATION = e.CODE;
                            }
                        });
                    } else {
                        params.CR_TYPE_OCCUPATION = self.message.CR_TYPE_OCCUPATION;
                    }
                    // 房产类型
                    if (this.totalData.PROPERTY_TYPE_DIC.some(function (e) {return e.FLAG == self.message.CR_NATU_MATE_PROPERTY_NAME})) {
                        this.totalData.PROPERTY_TYPE_DIC.forEach(function (e) {
                            if (e.FLAG == self.message.CR_NATU_MATE_PROPERTY_NAME) {
                                params.CR_NATU_MATE_PROPERTY = e.CODE;
                            }
                        });
                    } else {
                        params.CR_NATU_MATE_PROPERTY = self.message.CR_NATU_MATE_PROPERTY;
                    }
                    params.MAILING_LOAN = this.message.MAILING_LOAN == "有" ? 1 : 2; // 贷款
                    params.MAILING_LOANS_OVERDUE = this.message.MAILING_LOANS_OVERDUE == "有" ? 1 : 2; // 贷款逾期
                    params.MAILING_CREDIT = this.message.MAILING_CREDIT == "有" ? 1 : 2; // 贷记卡
                    params.MAILING_CREDIT_OVERDUE = this.message.MAILING_CREDIT_OVERDUE == "有" ? 1 : 2; // 贷记卡逾期
                    params.EMPLOYEE_ID_CARD_ADDR = this.message.EMPLOYEE_ID_CARD_ADDR; // 身份证地址
                    params.CR_NATU_HOME_ADDRESS = this.message.CR_NATU_HOME_ADDRESS; // 家庭地址
                    params.MAILING_ADDRESS_DZ = this.message.MAILING_ADDRESS_DZ; // 邮寄地址
                    params.CR_NATU_WORK_ADDRESS = this.message.CR_NATU_WORK_ADDRESS; // 单位地址
                    params.CR_NATU_ZIP = this.message.CR_NATU_ZIP; // 家庭地址邮编
                    params.CR_NATU_POSITION_ZIPCODE = this.message.CR_NATU_POSITION_ZIPCODE; // 邮寄地址邮编
                    params.CR_CORP_COMPANY_ZIP = this.message.CR_CORP_COMPANY_ZIP; // 单位地址邮编
                    // 婚姻状况
                    if (this.totalData.CR_MARRIAGE_STATE_DIC.some(function (e) {return e.FLAG == self.message.CR_MARRIAGE_STATE_NAME})) {
                        this.totalData.CR_MARRIAGE_STATE_DIC.forEach(function (e) {
                            if (e.FLAG == self.message.CR_MARRIAGE_STATE_NAME) {
                                params.CR_MARRIAGE_STATE = e.CODE;
                            }
                        });
                    } else {
                        params.CR_MARRIAGE_STATE = self.message.CR_MARRIAGE_STATE;
                    }
                    return params;
                },
                // 保存
                savePerson: function () {
                    var self = this;
                    if (!this.messageTest()) {
                        return;
                    };
                     //电子邮箱
                     if(this.message.EMPLOYEE_EMAIL.length > 0)
                     {
                      var objExp=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;
                      var objMatch=this.message.EMPLOYEE_EMAIL.match(objExp);
                    if (objMatch == null)
                     {
                       summer.toast({msg: "电子邮箱格式不对，请重新填写"}); 
                       return;
                       }
                      }
                    var paramData = this.saveParams();
                    summer.showProgress();
                    
                    ajaxRequest({
                        type: 'post',
                        url: 'customer/saveNpCust',
                        param: paramData
                    }, function (res) {
                        summer.hideProgress();
                        if (res.data.flag == 1) {
                            summer.toast({
                                msg: "保存成功"
                            });
                            if (self.sourceFrom == "programSelect") {
                                // 新增客户，保存成功后，回到立项并携带新的客户id
                                var clint_Id = res.data.datas.EMPLOYEE_ID;
                                self.clintId = clint_Id;
                                summer.execScript({
                                    winId: 'newCustom',
                                    script: "getData(1, true)"
                                });
                                summer.openWin({
                                    id: 'setProject',
                                    url: 'html/fastReport/setProject.html',
                                    create: false,
                                    isKeep: false,
                                    type: 'actionBar',
                                    pageParam: {
                                        source: "customer",
                                        customId: clint_Id,
                                        type: self.CR_BECR_TYPE == "自然人" ? 1 : 2,
                                        USER_ID: self.USER_ID,
                                        CSTATUS: 0
                                    },
                                    actionBar: {
                                        title: "快捷报单",
                                        titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
                                        backgroundColor: "#039be5",
                                        leftItem: {
                                            image: "img/back.png",
                                            method: "", //返回按钮自定义事件
                                            text: "返回",
                                            textColor: "#ffffff" //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
                                        },
                                        rightItems: [{
                                            type: "text",
                                            text: "下一步",
                                            textColor: "#ffffff", //文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
                                            method: "nextStopInput()" //在打开的window中自定义事件
                                        }]
                                    }
                                });
                            } else {
                                // 查看客户，从立项进，回到立项
                                if (self.sourceFrom == "setProject") {
                                    summer.execScript({
                                        winId: 'setProject',
                                        script: "setProgect.getProjectId()"
                                    });
                                } else {
                                    summer.execScript({
                                        winId: 'newCustom',
                                        script: "getData(1, true)"
                                    });
                                }
                                summer.closeWin();
                            }
                        } else if (res.data.flag == 0) {
                            if (res.data.code == "E02003") {
                                summer.toast({
                                    msg: "客户证件号重复,请重新录入"
                                });
                            } else {
                                summer.toast({
                                    msg: "保存失败"
                                });
                            }
                        }
                    }, function (err) {
                        console.log(err);
                        summer.hideProgress();
                        summer.toast({
                            msg: "保存失败"
                        });
                    });
                },
                // 下一步
                nextStopAction: function () {
                    if (!this.messageTest()) {
                        return;
                    };
                    var paramData = this.saveParams();
                    var sourceFrom;
                    var self = this;
                    /* if (self.isAdd) {
                        sourceFrom = "newCreateCustom_verify2";
                    } else {
                    } */
                    sourceFrom = self.sourceFrom;
                    /* if (self.isAdd) {
                        summer.openWin({
                            id: 'newCreateCustom_verify2',
                            url: 'html/fastReport/newCreateCustom_verify2.html',
                            create: false,
                            type: 'actionBar',
                            actionBar: {
                                title: "配偶信息验证",
                                titleColor: "#ffffff",
                                backgroundColor: "#039be5",
                                leftItem: {
                                    image: "img/back.png",
                                    method: "",
                                    text: "返回",
                                    textColor: "#ffffff"
                                },
                                rightItems: [{
                                    type: "text",
                                    text: "验证",
                                    textColor: "#ffffff", 
                                    method: "verifyMessage()"
                                }]
                            },
                            pageParam: {
                                // 全部数据
                                totalData: self.totalData,
                                // 信息详情
                                // personMessage: self.message,
                                // sourceFrom: self.sourceFrom,
                                // 证件类型
                                cardValues: self.slots1[0].values,
                                // 性别
                                sexValues: self.slots2[0].values,
                                // 教育（学历）
                                eduValues: self.totalData.CR_NATU_MATE_EDUCATION_DIC,
                                // 客户信息字段
                                prevParams: paramData
                            }
                        });
                    } else {
                        summer.openWin({
                            id: 'newCreateCustom2',
                            url: 'html/fastReport/newCreateCustom2.html',
                            create: false,
                            type: 'actionBar',
                            actionBar: {
                                title: "配偶信息",
                                titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
                                backgroundColor: "#039be5",
                                leftItem: {
                                    image: "img/back.png",
                                    method: "", //返回按钮自定义事件
                                    text: "返回",
                                    textColor: "#ffffff" //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
                                },
                                rightItems: [{
                                    type: "text",
                                    text: "保存",
                                    textColor: "#ffffff", //文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
                                    method: "saveAllPerMessage()" //在打开的window中自定义事件
                                }]
                            },
                            pageParam: {
                                // 全部数据
                                totalData: self.totalData,
                                // 信息详情
                                personMessage: self.message,
                                sourceFrom: self.sourceFrom,
                                // 证件类型
                                cardValues: self.slots1[0].values,
                                // 性别
                                sexValues: self.slots2[0].values,
                                // 教育（学历）
                                eduValues: self.totalData.CR_NATU_MATE_EDUCATION_DIC,
                                // 客户信息字段
                                prevParams: paramData
                            }
                        });
                    } */
                    summer.openWin({
                        id: 'newCreateCustom2',
                        url: 'html/fastReport/newCreateCustom2.html',
                        create: false,
                        type: 'actionBar',
                        actionBar: {
                            title: "配偶信息",
                            titleColor: "#ffffff", //注意必须是6位数的颜色值。（3位数颜色值会不正常）
                            backgroundColor: "#039be5",
                            leftItem: {
                                image: "img/back.png",
                                method: "", //返回按钮自定义事件
                                text: "返回",
                                textColor: "#ffffff" //返回文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
                            },
                            rightItems: [{
                                type: "text",
                                text: "保存",
                                textColor: "#ffffff", //文字颜色，注意必须是6位数的颜色值。（3位数颜色值会不正常）
                                method: "saveAllPerMessage()" //在打开的window中自定义事件
                            }]
                        },
                        pageParam: {
                            // 全部数据
                            totalData: self.totalData,
                            // 信息详情
                            personMessage: self.message,
                            sourceFrom: sourceFrom,
                            add: self.isAdd,
                            // 证件类型
                            cardValues: self.slots1[0].values,
                            // 性别
                            sexValues: self.slots2[0].values,
                            // 教育（学历）
                            eduValues: self.totalData.CR_NATU_MATE_EDUCATION_DIC,
                            // 客户信息字段
                            prevParams: paramData,
                            // 客户类型
                            type: self.CR_BECR_TYPE,
                            USER_ID: self.USER_ID
                        }
                    });
                }
            }
        })
        // 保存
        function savePerson() {
            newCreateCustom.savePerson();
        }
        // 下一步
        function nextStopAction() {
            newCreateCustom.nextStopAction();
        }

        summerready = function () {
            var projectId = summer.pageParam.projectId;
            var type = summer.pageParam.type;
            if (typeof type == "number") {
                newCreateCustom.CR_BECR_TYPE = type == 1 ? "自然人" : "法人";
            } else {
                newCreateCustom.CR_BECR_TYPE = type;
            }
            var USER_ID = summer.pageParam.USER_ID;
            newCreateCustom.USER_ID = USER_ID;
            var clintId = summer.pageParam.clintId;
            var isAdd = summer.pageParam.isAdd;
            newCreateCustom.isAdd = isAdd;
            var CSTATUS = summer.pageParam.CSTATUS;
            newCreateCustom.CSTATUS = CSTATUS;
            var sourceFrom = summer.pageParam.sourceFrom;
            newCreateCustom.sourceFrom = sourceFrom;
            newCreateCustom.clintId = clintId;
            var customBaseMessage = summer.pageParam.personBaseMessage;
            if ((sourceFrom == "programSelect" || sourceFrom == "index") && customBaseMessage) {
                // 添加客户
                // 姓名
                newCreateCustom.message.CR_BECR_NAME = customBaseMessage.cstNm;
                // 手机号
                newCreateCustom.message.CR_NATU_MOBILE = customBaseMessage.cstPhoneNumber;
                // 身份证号
                newCreateCustom.message.CR_NATU_IDCARD = customBaseMessage.certNo;
                // 证件类型
                newCreateCustom.message.CR_ID_CARD_TYPE_NAME = "身份证";
                // 性别
                newCreateCustom.message.CR_NATU_SEX = customBaseMessage.sex;
                // 出生日期
                newCreateCustom.message.CR_BIRTH_DATE = customBaseMessage.birth;
                // 客户状态 CSTATUS=1 为正式客户 CSTATUS=0为意向客户
                newCreateCustom.CSTATUS = 0;
            }
            // 获取信息
            newCreateCustom.getData(projectId, newCreateCustom.clintId, newCreateCustom.CR_BECR_TYPE);
        }
        $(function () {
            $('body').height($('body')[0].clientHeight);
        });
    </script>
</body>

</html>